 fetchData: function (data) { var self = this; self.setData({ hidden: false }); if (!data) data = {}; if (!data.page) data.page = 1; if (data.page === 1) { self.setData({ postsList: [] }); } wx.request({ url: Api.getTopics(data), success: function (res) { self.setData({ postsList: self.data.postsList.concat(res.data.data.map(function (item) { item.last_reply_at = util.getDateDiff(new Date(item.last_reply_at)); return item; })) }); setTimeout(function () { self.setData({ hidden: true }); }, 300); } }); }
